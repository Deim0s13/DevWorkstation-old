---
- name: Verify common role
  hosts: all
  gather_facts: false
  tasks:
    - name: Check if vim is installed
      command: vim --version
      register: result
      changed_when: false
      failed_when: result.rc != 0

    - name: Check if SELinux is enforcing
      command: getenforce
      register: result
      changed_when: false
      failed_when: result.stdout != "Enforcing"

    - name: Check if firewalld is running
      systemd:
        name: firewalld
        state: started
      register: result
      changed_when: false
      failed_when: result.status.ActiveState != "active"